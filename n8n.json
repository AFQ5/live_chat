{
  "name": "My workflow 4",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "chat",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        -240,
        -140
      ],
      "id": "60ac5622-1f5d-4cd1-978f-170cffdbb370",
      "name": "Webhook",
      "webhookId": "98bb9b72-bd50-445e-bca8-2dec0e72fd90"
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "{\n  \"\": {\n    \"message\": \"ÿ£Ÿä ÿßŸÑÿÆÿØŸÖÿßÿ™ ÿ™ÿ±ŸäÿØ\",\n    \"options\": [\"ÿÆÿØŸÖÿßÿ™ ÿßŸÑÿπŸÖŸÑÿßÿ°\", \"ÿßŸÑÿØÿπŸÖ ÿßŸÑŸÅŸÜŸä\", \"ÿßŸÑÿßÿ≥ÿ™ŸÅÿ≥ÿßÿ±ÿßÿ™ ÿßŸÑÿπÿßŸÖÿ©\", \"ÿ•ŸÜŸáÿßÿ° ÿßŸÑŸÖÿ≠ÿßÿØÿ´ÿ©\"]\n  },\n  \"ÿÆÿØŸÖÿßÿ™ ÿßŸÑÿπŸÖŸÑÿßÿ°\": {\n    \"message\": \"ÿßÿÆÿ™ÿ± ŸÜŸàÿπ ÿßŸÑÿÆÿØŸÖÿ© ÿßŸÑÿ™Ÿä ÿ™ÿ≠ÿ™ÿßÿ¨Ÿáÿß:\",\n    \"options\": [\"ÿ™ÿ™ÿ®ÿπ ÿßŸÑÿ∑ŸÑÿ®\", \"ÿ•ÿ±ÿ¨ÿßÿπ ÿßŸÑŸÖŸÜÿ™ÿ¨\", \"ÿßŸÑÿ¥ŸÉÿßŸàŸâ\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\"]\n  },\n  \"ÿ™ÿ™ÿ®ÿπ ÿßŸÑÿ∑ŸÑÿ®\": {\n    \"message\": \"ŸÑÿ™ÿ™ÿ®ÿπ ÿ∑ŸÑÿ®ŸÉÿå ÿßÿÆÿ™ÿ± ÿ£ÿ≠ÿØ ÿßŸÑÿÆŸäÿßÿ±ÿßÿ™ ÿßŸÑÿ™ÿßŸÑŸäÿ©:\",\n    \"options\": [\"ÿ£ÿØÿÆŸÑ ÿ±ŸÇŸÖ ÿßŸÑÿ∑ŸÑÿ®\", \"ÿ¢ÿÆÿ± ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™\", \"ÿ≠ÿßŸÑÿ© ÿßŸÑÿ¥ÿ≠ŸÜ\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿÆŸÑŸÅ\"]\n  },\n  \"ÿ•ÿ±ÿ¨ÿßÿπ ÿßŸÑŸÖŸÜÿ™ÿ¨\": {\n    \"message\": \"ŸÖÿß ÿ≥ÿ®ÿ® ÿßŸÑÿ•ÿ±ÿ¨ÿßÿπÿü\",\n    \"options\": [\"ÿπŸäÿ® ŸÅŸä ÿßŸÑŸÖŸÜÿ™ÿ¨\", \"ŸÑÿß Ÿäÿ∑ÿßÿ®ŸÇ ÿßŸÑŸàÿµŸÅ\", \"ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿ±ÿ£Ÿä\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿÆŸÑŸÅ\"]\n  },\n  \"ÿßŸÑÿ¥ŸÉÿßŸàŸâ\": {\n    \"message\": \"ŸÜÿ£ÿ≥ŸÅ ŸÑÿ≥ŸÖÿßÿπ ÿ∞ŸÑŸÉ. ŸÖÿß ŸÜŸàÿπ ÿßŸÑÿ¥ŸÉŸàŸâÿü\",\n    \"options\": [\"ÿ¨ŸàÿØÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨\", \"ÿÆÿØŸÖÿ© ÿßŸÑÿ™ŸàÿµŸäŸÑ\", \"ÿÆÿØŸÖÿ© ÿßŸÑÿπŸÖŸÑÿßÿ°\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿÆŸÑŸÅ\"]\n  },\n  \"ÿßŸÑÿØÿπŸÖ ÿßŸÑŸÅŸÜŸä\": {\n    \"message\": \"ÿßÿÆÿ™ÿ± ŸÜŸàÿπ ÿßŸÑŸÖÿ¥ŸÉŸÑÿ© ÿßŸÑÿ™ŸÇŸÜŸäÿ©:\",\n    \"options\": [\"ŸÖÿ¥ŸÉŸÑÿ© ŸÅŸä ÿßŸÑŸÖŸàŸÇÿπ\", \"ŸÖÿ¥ŸÉŸÑÿ© ŸÅŸä ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ\", \"ŸÖÿ¥ŸÉŸÑÿ© ŸÅŸä ÿßŸÑÿØŸÅÿπ\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\"]\n  },\n  \"ŸÖÿ¥ŸÉŸÑÿ© ŸÅŸä ÿßŸÑŸÖŸàŸÇÿπ\": {\n    \"message\": \"ŸÖÿß ÿßŸÑŸÖÿ¥ŸÉŸÑÿ© ÿßŸÑÿ™Ÿä ÿ™Ÿàÿßÿ¨ŸáŸáÿß ŸÅŸä ÿßŸÑŸÖŸàŸÇÿπÿü\",\n    \"options\": [\"ŸÑÿß ŸäŸÖŸÉŸÜŸÜŸä ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ\", \"ÿßŸÑŸÖŸàŸÇÿπ ÿ®ÿ∑Ÿäÿ°\", \"ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿµŸÅÿ≠ÿ©\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿÆŸÑŸÅ\"]\n  },\n  \"ŸÖÿ¥ŸÉŸÑÿ© ŸÅŸä ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ\": {\n    \"message\": \"ŸÖÿß ÿßŸÑŸÖÿ¥ŸÉŸÑÿ© ÿßŸÑÿ™Ÿä ÿ™Ÿàÿßÿ¨ŸáŸáÿß ŸÅŸä ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇÿü\",\n    \"options\": [\"ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ŸÑÿß ŸäŸÅÿ™ÿ≠\", \"ŸÖÿ¥ŸÉŸÑÿ© ŸÅŸä ÿßŸÑÿ™ÿ≠ÿØŸäÿ´\", \"ŸÖÿ¥ŸÉŸÑÿ© ŸÅŸä ÿßŸÑŸÖÿ≤ÿßŸÖŸÜÿ©\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿÆŸÑŸÅ\"]\n  },\n  \"ŸÖÿ¥ŸÉŸÑÿ© ŸÅŸä ÿßŸÑÿØŸÅÿπ\": {\n    \"message\": \"ŸÖÿß ŸÜŸàÿπ ŸÖÿ¥ŸÉŸÑÿ© ÿßŸÑÿØŸÅÿπÿü\",\n    \"options\": [\"ÿßŸÑÿ®ÿ∑ÿßŸÇÿ© ŸÖÿ±ŸÅŸàÿ∂ÿ©\", \"ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑŸÖÿ®ŸÑÿ∫\", \"ŸÖÿ¥ŸÉŸÑÿ© ŸÅŸä ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿÆŸÑŸÅ\"]\n  },\n  \"ÿßŸÑÿßÿ≥ÿ™ŸÅÿ≥ÿßÿ±ÿßÿ™ ÿßŸÑÿπÿßŸÖÿ©\": {\n    \"message\": \"ÿßÿÆÿ™ÿ± ŸÖŸàÿ∂Ÿàÿπ ÿßÿ≥ÿ™ŸÅÿ≥ÿßÿ±ŸÉ:\",\n    \"options\": [\"ÿ≥ÿßÿπÿßÿ™ ÿßŸÑÿπŸÖŸÑ\", \"ŸÖŸàÿßŸÇÿπ ÿßŸÑŸÅÿ±Ÿàÿπ\", \"ÿ∑ÿ±ŸÇ ÿßŸÑÿØŸÅÿπ\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\"]\n  },\n  \"ÿ≥ÿßÿπÿßÿ™ ÿßŸÑÿπŸÖŸÑ\": {\n    \"message\": \"ÿ≥ÿßÿπÿßÿ™ ÿßŸÑÿπŸÖŸÑ ŸÑÿØŸäŸÜÿß:\\n‚Ä¢ ÿßŸÑÿ£ÿ≠ÿØ - ÿßŸÑÿÆŸÖŸäÿ≥: 9 ÿµÿ®ÿßÿ≠ÿßŸã - 10 ŸÖÿ≥ÿßÿ°Ÿã\\n‚Ä¢ ÿßŸÑÿ¨ŸÖÿπÿ©: 2 ÿ∏Ÿáÿ±ÿßŸã - 11 ŸÖÿ≥ÿßÿ°Ÿã\\n‚Ä¢ ÿßŸÑÿ≥ÿ®ÿ™: 10 ÿµÿ®ÿßÿ≠ÿßŸã - 11 ŸÖÿ≥ÿßÿ°Ÿã\",\n    \"options\": [\"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿÆŸÑŸÅ\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\"]\n  },\n  \"ŸÖŸàÿßŸÇÿπ ÿßŸÑŸÅÿ±Ÿàÿπ\": {\n    \"message\": \"ÿßÿÆÿ™ÿ± ÿßŸÑŸÖÿØŸäŸÜÿ©:\",\n    \"options\": [\"ÿßŸÑÿ±Ÿäÿßÿ∂\", \"ÿ¨ÿØÿ©\", \"ÿßŸÑÿØŸÖÿßŸÖ\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿÆŸÑŸÅ\"]\n  },\n  \"ÿ∑ÿ±ŸÇ ÿßŸÑÿØŸÅÿπ\": {\n    \"message\": \"ŸÜŸÇÿ®ŸÑ ÿ∑ÿ±ŸÇ ÿßŸÑÿØŸÅÿπ ÿßŸÑÿ™ÿßŸÑŸäÿ©:\\n‚Ä¢ ÿßŸÑÿ®ÿ∑ÿßŸÇÿßÿ™ ÿßŸÑÿßÿ¶ÿ™ŸÖÿßŸÜŸäÿ© (ŸÅŸäÿ≤ÿßÿå ŸÖÿßÿ≥ÿ™ÿ±ŸÉÿßÿ±ÿØ)\\n‚Ä¢ ŸÖÿØŸâ\\n‚Ä¢ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑÿ®ŸÜŸÉŸä\\n‚Ä¢ ÿßŸÑÿØŸÅÿπ ÿπŸÜÿØ ÿßŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ\",\n    \"options\": [\"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿÆŸÑŸÅ\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\"]\n  },\n  \"ÿßŸÑÿ±Ÿäÿßÿ∂\": {\n    \"message\": \"ŸÅÿ±ŸàÿπŸÜÿß ŸÅŸä ÿßŸÑÿ±Ÿäÿßÿ∂:\\n‚Ä¢ ŸÅÿ±ÿπ ÿßŸÑÿπŸÑŸäÿß: ÿ¥ÿßÿ±ÿπ ÿßŸÑÿ™ÿ≠ŸÑŸäÿ©\\n‚Ä¢ ŸÅÿ±ÿπ ÿßŸÑŸÜÿÆŸäŸÑ: ÿ∑ÿ±ŸäŸÇ ÿßŸÑŸÖŸÑŸÉ ŸÅŸáÿØ\\n‚Ä¢ ŸÅÿ±ÿπ ÿßŸÑÿ±ÿ®Ÿàÿ©: ÿ¥ÿßÿ±ÿπ ÿßŸÑÿ£ŸÖŸäÿ± ŸÖÿ≠ŸÖÿØ ÿ®ŸÜ ÿπÿ®ÿØÿßŸÑÿπÿ≤Ÿäÿ≤\",\n    \"options\": [\"ÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ÿ±ÿßÿ®ÿ∑ ÿßŸÑŸÖŸàŸÇÿπ\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿÆŸÑŸÅ\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\"]\n  },\n  \"ÿ¨ÿØÿ©\": {\n    \"message\": \"ŸÅÿ±ŸàÿπŸÜÿß ŸÅŸä ÿ¨ÿØÿ©:\\n‚Ä¢ ŸÅÿ±ÿπ ÿßŸÑŸÉŸàÿ±ŸÜŸäÿ¥: ÿ¥ÿßÿ±ÿπ ÿßŸÑŸÉŸàÿ±ŸÜŸäÿ¥\\n‚Ä¢ ŸÅÿ±ÿπ ÿßŸÑÿ±Ÿàÿ∂ÿ©: ÿ¥ÿßÿ±ÿπ ÿßŸÑÿ£ŸÖŸäÿ± ÿ≥ŸÑÿ∑ÿßŸÜ\\n‚Ä¢ ŸÅÿ±ÿπ ÿßŸÑÿ®ŸÑÿØ: ÿßŸÑÿ≥ŸàŸÇ ÿßŸÑÿ™ÿßÿ±ŸäÿÆŸä\",\n    \"options\": [\"ÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ÿ±ÿßÿ®ÿ∑ ÿßŸÑŸÖŸàŸÇÿπ\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿÆŸÑŸÅ\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\"]\n  },\n  \"ÿßŸÑÿØŸÖÿßŸÖ\": {\n    \"message\": \"ŸÅÿ±ŸàÿπŸÜÿß ŸÅŸä ÿßŸÑÿØŸÖÿßŸÖ:\\n‚Ä¢ ŸÅÿ±ÿπ ÿßŸÑÿ¥ÿßÿ∑ÿ¶: ÿ¥ÿßÿ±ÿπ ÿßŸÑŸÖŸÑŸÉ ÿπÿ®ÿØÿßŸÑŸÑŸá\\n‚Ä¢ ŸÅÿ±ÿπ ÿßŸÑÿ∏Ÿáÿ±ÿßŸÜ: ÿ¥ÿßÿ±ÿπ ÿßŸÑÿ£ŸÖŸäÿ± ŸÜÿßŸäŸÅ\",\n    \"options\": [\"ÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ÿ±ÿßÿ®ÿ∑ ÿßŸÑŸÖŸàŸÇÿπ\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿÆŸÑŸÅ\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\"]\n  },\n  \"ŸÑÿß ŸäŸÖŸÉŸÜŸÜŸä ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ\": {\n    \"message\": \"ŸÑÿ≠ŸÑ ŸÖÿ¥ŸÉŸÑÿ© ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ:\\n1. ÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿµÿ≠ÿ© ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä\\n2. ÿ£ÿπÿØ ÿ™ÿπŸäŸäŸÜ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±\\n3. ÿßŸÖÿ≥ÿ≠ ÿ∞ÿßŸÉÿ±ÿ© ÿßŸÑÿ™ÿÆÿ≤ŸäŸÜ ÿßŸÑŸÖÿ§ŸÇÿ™ ŸÑŸÑŸÖÿ™ÿµŸÅÿ≠\",\n    \"options\": [\"ÿ£ÿ≠ÿ™ÿßÿ¨ ŸÖÿ≥ÿßÿπÿØÿ© ÿ•ÿ∂ÿßŸÅŸäÿ©\", \"ÿ™ŸÖ ÿ≠ŸÑ ÿßŸÑŸÖÿ¥ŸÉŸÑÿ©\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\"]\n  },\n  \"ÿßŸÑŸÖŸàŸÇÿπ ÿ®ÿ∑Ÿäÿ°\": {\n    \"message\": \"ŸÑÿ≠ŸÑ ŸÖÿ¥ŸÉŸÑÿ© ÿ®ÿ∑ÿ° ÿßŸÑŸÖŸàŸÇÿπ:\\n1. ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ≥ÿ±ÿπÿ© ÿßŸÑÿ•ŸÜÿ™ÿ±ŸÜÿ™\\n2. ÿßŸÖÿ≥ÿ≠ ÿ∞ÿßŸÉÿ±ÿ© ÿßŸÑÿ™ÿÆÿ≤ŸäŸÜ ÿßŸÑŸÖÿ§ŸÇÿ™\\n3. ÿ¨ÿ±ÿ® ŸÖÿ™ÿµŸÅÿ≠ ÿ¢ÿÆÿ±\",\n    \"options\": [\"ÿ£ÿ≠ÿ™ÿßÿ¨ ŸÖÿ≥ÿßÿπÿØÿ© ÿ•ÿ∂ÿßŸÅŸäÿ©\", \"ÿ™ŸÖ ÿ≠ŸÑ ÿßŸÑŸÖÿ¥ŸÉŸÑÿ©\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\"]\n  },\n  \"ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿµŸÅÿ≠ÿ©\": {\n    \"message\": \"Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ≤ŸàŸäÿØŸÜÿß ÿ®ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ™ÿßŸÑŸäÿ©:\\n‚Ä¢ ÿ±ÿßÿ®ÿ∑ ÿßŸÑÿµŸÅÿ≠ÿ©\\n‚Ä¢ ŸÜŸàÿπ ÿßŸÑÿÆÿ∑ÿ£\\n‚Ä¢ ÿßŸÑŸÖÿ™ÿµŸÅÿ≠ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ\",\n    \"options\": [\"ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\"]\n  },\n  \"ÿπŸäÿ® ŸÅŸä ÿßŸÑŸÖŸÜÿ™ÿ¨\": {\n    \"message\": \"ŸÜÿ£ÿ≥ŸÅ ÿ¨ÿØÿßŸã ŸÑŸáÿ∞ÿß. ÿ≥ŸÜÿπÿßŸÑÿ¨ ÿ∑ŸÑÿ® ÿßŸÑÿ•ÿ±ÿ¨ÿßÿπ ŸÅŸàÿ±ÿßŸã.\\nŸäÿ±ÿ¨Ÿâ ÿ•ÿ±ÿ≥ÿßŸÑ:\\n‚Ä¢ ÿ±ŸÇŸÖ ÿßŸÑÿ∑ŸÑÿ®\\n‚Ä¢ ÿµŸàÿ± ŸÑŸÑÿπŸäÿ®\\n‚Ä¢ ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ\",\n    \"options\": [\"ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™\", \"ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿÆÿØŸÖÿ© ÿßŸÑÿπŸÖŸÑÿßÿ°\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\"]\n  },\n  \"ŸÑÿß Ÿäÿ∑ÿßÿ®ŸÇ ÿßŸÑŸàÿµŸÅ\": {\n    \"message\": \"ŸÜÿπÿ™ÿ∞ÿ± ÿπŸÜ Ÿáÿ∞ÿß ÿßŸÑÿÆÿ∑ÿ£. Ÿäÿ≠ŸÇ ŸÑŸÉ ÿßŸÑÿ•ÿ±ÿ¨ÿßÿπ ÿÆŸÑÿßŸÑ 14 ŸäŸàŸÖ.\\nŸäÿ±ÿ¨Ÿâ ÿ™ÿ¨ŸáŸäÿ≤:\\n‚Ä¢ ÿ±ŸÇŸÖ ÿßŸÑÿ∑ŸÑÿ®\\n‚Ä¢ ÿµŸàÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨\",\n    \"options\": [\"ÿ®ÿØÿ° ÿπŸÖŸÑŸäÿ© ÿßŸÑÿ•ÿ±ÿ¨ÿßÿπ\", \"ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿÆÿØŸÖÿ© ÿßŸÑÿπŸÖŸÑÿßÿ°\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\"]\n  },\n  \"ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿ±ÿ£Ÿä\": {\n    \"message\": \"ŸÑÿß ŸÖÿ¥ŸÉŸÑÿ©! ŸäŸÖŸÉŸÜŸÉ ÿßŸÑÿ•ÿ±ÿ¨ÿßÿπ ÿÆŸÑÿßŸÑ 14 ŸäŸàŸÖ ŸÖŸÜ ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ.\\nÿßŸÑÿ¥ÿ±Ÿàÿ∑:\\n‚Ä¢ ÿßŸÑŸÖŸÜÿ™ÿ¨ ÿ®ÿ≠ÿßŸÑÿ™Ÿá ÿßŸÑÿ£ÿµŸÑŸäÿ©\\n‚Ä¢ ŸÖÿπ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖŸÑÿ≠ŸÇÿßÿ™\",\n    \"options\": [\"ÿ®ÿØÿ° ÿπŸÖŸÑŸäÿ© ÿßŸÑÿ•ÿ±ÿ¨ÿßÿπ\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\"]\n  },\n  \"ÿ¨ŸàÿØÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨\": {\n    \"message\": \"ŸÜÿ£ÿ≥ŸÅ ŸÑÿπÿØŸÖ ÿ±ÿ∂ÿßŸÉ ÿπŸÜ ÿ¨ŸàÿØÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨.\\nÿ≥Ÿäÿ™ŸÖ ÿ™ÿ≠ŸàŸäŸÑ ÿ¥ŸÉŸàÿßŸÉ ŸÑŸÇÿ≥ŸÖ ÿßŸÑÿ¨ŸàÿØÿ© ŸÑŸÑŸÖÿ±ÿßÿ¨ÿπÿ©.\\nÿ±ŸÇŸÖ ÿßŸÑÿ¥ŸÉŸàŸâ: #QC{random}\",\n    \"options\": [\"ŸÖÿ™ÿßÿ®ÿπÿ© ÿßŸÑÿ¥ŸÉŸàŸâ\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\"]\n  },\n  \"ÿÆÿØŸÖÿ© ÿßŸÑÿ™ŸàÿµŸäŸÑ\": {\n    \"message\": \"ŸÜÿπÿ™ÿ∞ÿ± ÿπŸÜ ÿ£Ÿä ÿ•ÿ≤ÿπÿßÿ¨ ŸÅŸä ÿÆÿØŸÖÿ© ÿßŸÑÿ™ŸàÿµŸäŸÑ.\\nŸäÿ±ÿ¨Ÿâ ÿ™ÿ≤ŸàŸäÿØŸÜÿß ÿ®ŸÄ:\\n‚Ä¢ ÿ±ŸÇŸÖ ÿßŸÑÿ∑ŸÑÿ®\\n‚Ä¢ ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑŸÖÿ¥ŸÉŸÑÿ©\",\n    \"options\": [\"ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\"]\n  },\n  \"ÿÆÿØŸÖÿ© ÿßŸÑÿπŸÖŸÑÿßÿ°\": {\n    \"message\": \"ŸÜÿ£ÿ≥ŸÅ ŸÑŸáÿ∞Ÿá ÿßŸÑÿ™ÿ¨ÿ±ÿ®ÿ©.\\nÿ≥Ÿäÿ™ŸÖ ŸÖÿ±ÿßÿ¨ÿπÿ© ÿ¥ŸÉŸàÿßŸÉ ŸÖŸÜ ŸÇÿ®ŸÑ ŸÖÿØŸäÿ± ÿßŸÑÿÆÿØŸÖÿ©.\\nÿ±ŸÇŸÖ ÿßŸÑÿ¥ŸÉŸàŸâ: #CS{random}\",\n    \"options\": [\"ŸÖÿ™ÿßÿ®ÿπÿ© ŸÖÿπ ÿßŸÑŸÖÿØŸäÿ±\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\"]\n  },\n  \"ÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ÿ±ÿßÿ®ÿ∑ ÿßŸÑŸÖŸàŸÇÿπ\": {\n    \"message\": \"ÿ≥Ÿäÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿßÿ®ÿ∑ ÿßŸÑŸÖŸàŸÇÿπ ÿπŸÑŸâ ÿ±ŸÇŸÖŸÉ ÿßŸÑŸÖÿ≥ÿ¨ŸÑ ÿπÿ®ÿ± ÿ±ÿ≥ÿßŸÑÿ© ŸÜÿµŸäÿ© ÿÆŸÑÿßŸÑ ÿØŸÇÿßÿ¶ŸÇ.\",\n    \"options\": [\"ÿ¥ŸÉÿ±ÿßŸã\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\"]\n  },\n  \"ÿ£ÿ≠ÿ™ÿßÿ¨ ŸÖÿ≥ÿßÿπÿØÿ© ÿ•ÿ∂ÿßŸÅŸäÿ©\": {\n    \"message\": \"ÿ≥Ÿäÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÉ ÿ£ÿ≠ÿØ ŸÖŸÖÿ´ŸÑŸä ÿÆÿØŸÖÿ© ÿßŸÑÿπŸÖŸÑÿßÿ° ÿÆŸÑÿßŸÑ 24 ÿ≥ÿßÿπÿ©.\\nÿ£ŸàŸÇÿßÿ™ ÿÆÿØŸÖÿ© ÿßŸÑÿπŸÖŸÑÿßÿ°: 9 ÿµÿ®ÿßÿ≠ÿßŸã - 10 ŸÖÿ≥ÿßÿ°Ÿã\",\n    \"options\": [\"ÿ≠ÿ≥ŸÜÿßŸã\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\"]\n  },\n  \"ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™\": {\n    \"message\": \"Ÿäÿ±ÿ¨Ÿâ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ© ÿπŸÑŸâ:\\nüìß support@test.com\\nüì± Ÿàÿßÿ™ÿ≥ÿßÿ®: 0501234567\",\n    \"options\": [\"ÿ™ŸÖ ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\"]\n  },\n  \"ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿÆÿØŸÖÿ© ÿßŸÑÿπŸÖŸÑÿßÿ°\": {\n    \"message\": \"ŸäŸÖŸÉŸÜŸÉ ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß ÿπÿ®ÿ±:\\nüìû ÿßŸÑŸáÿßÿ™ŸÅ: 920012345\\nüìß ÿßŸÑÿ®ÿ±ŸäÿØ: support@test.com\\nüì± Ÿàÿßÿ™ÿ≥ÿßÿ®: 0501234567\",\n    \"options\": [\"ÿ¥ŸÉÿ±ÿßŸã\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\"]\n  },\n  \"ÿ®ÿØÿ° ÿπŸÖŸÑŸäÿ© ÿßŸÑÿ•ÿ±ÿ¨ÿßÿπ\": {\n    \"message\": \"ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿ∑ŸÑÿ® ÿ•ÿ±ÿ¨ÿßÿπ.\\nÿ±ŸÇŸÖ ÿßŸÑÿ∑ŸÑÿ®: #RET{random}\\nÿ≥Ÿäÿ™ŸÖ ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÉ ÿÆŸÑÿßŸÑ 48 ÿ≥ÿßÿπÿ©\",\n    \"options\": [\"ÿ¥ŸÉÿ±ÿßŸã\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\"]\n  },\n  \"ŸÖÿ™ÿßÿ®ÿπÿ© ÿßŸÑÿ¥ŸÉŸàŸâ\": {\n    \"message\": \"ŸäŸÖŸÉŸÜŸÉ ŸÖÿ™ÿßÿ®ÿπÿ© ÿ¥ŸÉŸàÿßŸÉ ÿπÿ®ÿ±:\\n‚Ä¢ ÿßŸÑŸÖŸàŸÇÿπ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä\\n‚Ä¢ ÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑÿ¨ŸàÿßŸÑ\\n‚Ä¢ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿπŸÑŸâ 920012345\",\n    \"options\": [\"ÿ≠ÿ≥ŸÜÿßŸã\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\"]\n  },\n  \"ŸÖÿ™ÿßÿ®ÿπÿ© ŸÖÿπ ÿßŸÑŸÖÿØŸäÿ±\": {\n    \"message\": \"ÿ≥Ÿäÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÉ ŸÖÿØŸäÿ± ÿÆÿØŸÖÿ© ÿßŸÑÿπŸÖŸÑÿßÿ° ÿÆŸÑÿßŸÑ 24 ÿ≥ÿßÿπÿ© ÿπŸÖŸÑ.\\nÿ£ŸàŸÑŸàŸäÿ™ŸÜÿß ŸáŸä ÿ±ÿ∂ÿßŸÉ ÿßŸÑÿ™ÿßŸÖ.\",\n    \"options\": [\"ÿ¥ŸÉÿ±ÿßŸã\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\"]\n  },\n  \"ÿ™ŸÖ ÿ≠ŸÑ ÿßŸÑŸÖÿ¥ŸÉŸÑÿ©\": {\n    \"message\": \"ÿ±ÿßÿ¶ÿπ! ŸÜÿ≠ŸÜ ÿ≥ÿπÿØÿßÿ° ÿ®ÿ≠ŸÑ ŸÖÿ¥ŸÉŸÑÿ™ŸÉ.\\nŸáŸÑ ÿ™ÿ≠ÿ™ÿßÿ¨ ÿ£Ÿä ŸÖÿ≥ÿßÿπÿØÿ© ÿ£ÿÆÿ±Ÿâÿü\",\n    \"options\": [\"ŸÜÿπŸÖ\", \"ŸÑÿßÿå ÿ¥ŸÉÿ±ÿßŸã\"]\n  },\n  \"ÿ™ŸÖ ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ\": {\n    \"message\": \"ÿ¥ŸÉÿ±ÿßŸã ŸÑŸÉ. ÿ™ŸÖ ÿßÿ≥ÿ™ŸÑÿßŸÖ ŸÖÿπŸÑŸàŸÖÿßÿ™ŸÉ.\\nÿ≥ŸÜÿ±ÿßÿ¨ÿπŸáÿß ŸàŸÜÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÉ ŸÇÿ±Ÿäÿ®ÿßŸã.\",\n    \"options\": [\"ÿ≠ÿ≥ŸÜÿßŸã\", \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\"]\n  },\n  \"ÿ•ŸÜŸáÿßÿ° ÿßŸÑŸÖÿ≠ÿßÿØÿ´ÿ©\": {\n    \"message\": \"ÿ¥ŸÉÿ±ÿßŸã ŸÑÿ™ŸàÿßÿµŸÑŸÉ ŸÖÿπŸÜÿß. ŸÜÿ™ŸÖŸÜŸâ ŸÑŸÉ ŸäŸàŸÖÿßŸã ÿ≥ÿπŸäÿØÿßŸã! üëã\",\n    \"options\": [\"ÿ®ÿØÿ° ŸÖÿ≠ÿßÿØÿ´ÿ© ÿ¨ÿØŸäÿØÿ©\"]\n  },\n  \"ŸÑÿßÿå ÿ¥ŸÉÿ±ÿßŸã\": {\n    \"message\": \"ÿ¥ŸÉÿ±ÿßŸã ŸÑÿ™ŸàÿßÿµŸÑŸÉ ŸÖÿπŸÜÿß. ŸÜÿ™ŸÖŸÜŸâ ŸÑŸÉ ŸäŸàŸÖÿßŸã ÿ≥ÿπŸäÿØÿßŸã! üëã\",\n    \"options\": [\"ÿ®ÿØÿ° ŸÖÿ≠ÿßÿØÿ´ÿ© ÿ¨ÿØŸäÿØÿ©\"]\n  },\n  \"ÿ¥ŸÉÿ±ÿßŸã\": {\n    \"message\": \"ÿπŸÑŸâ ÿßŸÑÿ±ÿ≠ÿ® ŸàÿßŸÑÿ≥ÿπÿ©! ŸáŸÑ ÿ™ÿ≠ÿ™ÿßÿ¨ ÿ£Ÿä ÿ¥Ÿäÿ° ÿ¢ÿÆÿ±ÿü\",\n    \"options\": [\"ŸÜÿπŸÖ\", \"ŸÑÿßÿå ÿ¥ŸÉÿ±ÿßŸã\"]\n  },\n  \"ÿ≠ÿ≥ŸÜÿßŸã\": {\n    \"message\": \"ŸáŸÑ ÿ™ÿ≠ÿ™ÿßÿ¨ ÿ£Ÿä ŸÖÿ≥ÿßÿπÿØÿ© ÿ£ÿÆÿ±Ÿâÿü\",\n    \"options\": [\"ŸÜÿπŸÖ\", \"ŸÑÿßÿå ÿ¥ŸÉÿ±ÿßŸã\"]\n  },\n  \"ŸÜÿπŸÖ\": {\n    \"redirect\": \"start\"\n  },\n  \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\": {\n    \"redirect\": \"start\"\n  },\n  \"ÿ®ÿØÿ° ŸÖÿ≠ÿßÿØÿ´ÿ© ÿ¨ÿØŸäÿØÿ©\": {\n    \"redirect\": \"start\"\n  },\n  \"start\": {\n    \"message\": \"ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉ! ŸÉŸäŸÅ ŸäŸÖŸÉŸÜŸÜŸä ŸÖÿ≥ÿßÿπÿØÿ™ŸÉ ÿßŸÑŸäŸàŸÖÿü\",\n    \"options\": [\"ÿÆÿØŸÖÿßÿ™ ÿßŸÑÿπŸÖŸÑÿßÿ°\", \"ÿßŸÑÿØÿπŸÖ ÿßŸÑŸÅŸÜŸä\", \"ÿßŸÑÿßÿ≥ÿ™ŸÅÿ≥ÿßÿ±ÿßÿ™ ÿßŸÑÿπÿßŸÖÿ©\", \"ÿ•ŸÜŸáÿßÿ° ÿßŸÑŸÖÿ≠ÿßÿØÿ´ÿ©\"]\n  }\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -40,
        -60
      ],
      "id": "66ea7857-dd9b-46c1-b008-0be6a958c4f3",
      "name": "Question Tree"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        160,
        -120
      ],
      "id": "662d32f5-3349-4c14-94ae-f4b740146e24",
      "name": "Merge"
    },
    {
      "parameters": {
        "conditions": {
          "boolean": [
            {
              "value1": "={{$json.escalated}}",
              "value2": true
            }
          ]
        }
      },
      "id": "f4456413-1254-48bd-bbba-9843989d3836",
      "name": "If Escalated",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        600,
        -120
      ]
    },
    {
      "parameters": {
        "jsCode": "// Your updated code node with agent escalation logic\n// Get workflow static data for session management\nconst staticData = $getWorkflowStaticData('global');\nif (!staticData.sessions) {\n  staticData.sessions = {};\n}\nconst sessions = staticData.sessions;\n\n// Get the merged data from input\nconst items = $input.all();\n\n// Parse the data structure\nlet questionTree = {};\nlet requestData = {};\n\nif (items.length >= 2) {\n  const webhookData = items[0].json;\n  questionTree = items[1].json;\n  \n  if (webhookData.body) {\n    requestData = webhookData.body;\n  } else {\n    requestData = webhookData;\n  }\n} else {\n  return [{\n    json: {\n      error: \"Missing question tree data\",\n      sessionId: \"error\"\n    }\n  }];\n}\n\n// Get sessionId and message\nconst sessionId = requestData.sessionId || (\"session-\" + Date.now());\nconst userMsg = (requestData.message || '').trim();\n\n// Initialize or get session\nif (!sessions[sessionId]) {\n  sessions[sessionId] = {\n    state: \"\",\n    previousStates: [],\n    lastAccess: Date.now(),\n    escalationAttempts: 0,\n    isEscalated: false,\n    conversationHistory: []\n  };\n}\nconst session = sessions[sessionId];\nsession.lastAccess = Date.now();\n\n// Check if this is a message from an escalated session\nif (session.isEscalated) {\n  // Handle empty message in escalated session - use special token\n  const messageToSend = userMsg === \"\" ? \"__INIT_CHAT__\" : userMsg;\n  \n  // Handle special responses from escalated sessions\n  if (userMsg === \"ŸÑÿßÿå ÿ¥ŸÉÿ±ÿßŸã ŸÑŸÉ\") {\n    // User is satisfied, end the escalation\n    session.isEscalated = false;\n    session.escalationReason = null;\n    \n    // Store conversation history before ending\n    session.conversationHistory.push({\n      user: userMsg,\n      bot: \"ÿ¥ŸÉÿ±ÿßŸã ŸÑŸÉ ÿπŸÑŸâ ÿ™ŸàÿßÿµŸÑŸÉ ŸÖÿπŸÜÿß. ŸÜÿ™ŸÖŸÜŸâ ÿ£ŸÜ ŸÜŸÉŸàŸÜ ŸÇÿØ ÿ≥ÿßÿπÿØŸÜÿßŸÉ. ŸÜÿ™ŸÖŸÜŸâ ŸÑŸÉ ŸäŸàŸÖÿßŸã ÿ≥ÿπŸäÿØÿßŸã! üëã\",\n      timestamp: new Date().toISOString()\n    });\n    \n    return [{\n      json: {\n        sessionId: sessionId,\n        message: \"ÿ¥ŸÉÿ±ÿßŸã ŸÑŸÉ ÿπŸÑŸâ ÿ™ŸàÿßÿµŸÑŸÉ ŸÖÿπŸÜÿß. ŸÜÿ™ŸÖŸÜŸâ ÿ£ŸÜ ŸÜŸÉŸàŸÜ ŸÇÿØ ÿ≥ÿßÿπÿØŸÜÿßŸÉ. ŸÜÿ™ŸÖŸÜŸâ ŸÑŸÉ ŸäŸàŸÖÿßŸã ÿ≥ÿπŸäÿØÿßŸã! üëã\",\n        options: [\"ÿ®ÿØÿ° ŸÖÿ≠ÿßÿØÿ´ÿ© ÿ¨ÿØŸäÿØÿ©\"],\n        endSession: true\n      }\n    }];\n  } else if (userMsg === \"ŸÜÿπŸÖÿå ŸÑÿØŸä ÿßÿ≥ÿ™ŸÅÿ≥ÿßÿ± ÿ¢ÿÆÿ±\") {\n    // User wants to continue with agent\n    return [{\n      json: {\n        sessionId: sessionId,\n        message: messageToSend,\n        escalated: true,\n        escalationReason: session.escalationReason,\n        customerPath: session.customerPath,\n        conversationHistory: session.conversationHistory || [],\n        previousMessages: session.conversationHistory ? \n          session.conversationHistory.map(h => `ÿßŸÑÿπŸÖŸäŸÑ: ${h.user}\\nÿßŸÑÿØÿπŸÖ: ${h.bot}`).join('\\n\\n') : '',\n        continueConversation: true\n      }\n    }];\n  } else if (userMsg === \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\" || userMsg === \"ÿ•ŸÑÿ∫ÿßÿ° ŸàÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\") {\n    // Reset to main menu\n    session.state = \"\";\n    session.previousStates = [];\n    session.isEscalated = false;\n    session.escalationReason = null;\n    const startNode = getNodeData(\"\");\n    \n    return [{\n      json: {\n        sessionId: sessionId,\n        message: startNode ? startNode.message : \"ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉ! ŸÉŸäŸÅ ŸäŸÖŸÉŸÜŸÜŸä ŸÖÿ≥ÿßÿπÿØÿ™ŸÉ ÿßŸÑŸäŸàŸÖÿü\",\n        options: startNode ? startNode.options : [],\n        cancelAgent: true\n      }\n    }];\n  } else {\n    // Forward any other message to AI agent with conversation history\n    // Use special token for empty messages\n    return [{\n      json: {\n        sessionId: sessionId,\n        message: messageToSend,\n        escalated: true,\n        escalationReason: session.escalationReason,\n        customerPath: session.customerPath,\n        conversationHistory: session.conversationHistory || [],\n        previousMessages: session.conversationHistory ? \n          session.conversationHistory.map(h => {\n            // Replace empty messages with __INIT_CHAT__ in history\n            const userMessage = h.user === \"\" ? \"__INIT_CHAT__\" : h.user;\n            return `ÿßŸÑÿπŸÖŸäŸÑ: ${userMessage}\\nÿßŸÑÿØÿπŸÖ: ${h.bot}`;\n          }).join('\\n\\n') : ''\n      }\n    }];\n  }\n}\n\n// Clean old sessions\nconst now = Date.now();\nconst sessionTimeout = 30 * 60 * 1000;\nconst sessionIds = Object.keys(sessions);\nif (sessionIds.length > 100) {\n  sessionIds\n    .sort((a, b) => sessions[a].lastAccess - sessions[b].lastAccess)\n    .slice(0, sessionIds.length - 100)\n    .forEach(sid => {\n      if (now - sessions[sid].lastAccess > sessionTimeout) {\n        delete sessions[sid];\n      }\n    });\n}\n\n// Define trigger keywords for agent escalation\nconst agentTriggers = [\n  \"ÿ£ÿØÿÆŸÑ ÿ±ŸÇŸÖ ÿßŸÑÿ∑ŸÑÿ®\",\n  \"ÿ¢ÿÆÿ± ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™\",\n  \"ÿ≠ÿßŸÑÿ© ÿßŸÑÿ¥ÿ≠ŸÜ\",\n  \"ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ŸÑÿß ŸäŸÅÿ™ÿ≠\",\n  \"ŸÖÿ¥ŸÉŸÑÿ© ŸÅŸä ÿßŸÑÿ™ÿ≠ÿØŸäÿ´\",\n  \"ŸÖÿ¥ŸÉŸÑÿ© ŸÅŸä ÿßŸÑŸÖÿ≤ÿßŸÖŸÜÿ©\",\n  \"ÿßŸÑÿ®ÿ∑ÿßŸÇÿ© ŸÖÿ±ŸÅŸàÿ∂ÿ©\",\n  \"ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑŸÖÿ®ŸÑÿ∫\",\n  \"ŸÖÿ¥ŸÉŸÑÿ© ŸÅŸä ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ\",\n  \"ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™\",\n  \"ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿÆÿØŸÖÿ© ÿßŸÑÿπŸÖŸÑÿßÿ°\",\n  \"ŸÖÿ™ÿßÿ®ÿπÿ© ŸÖÿπ ÿßŸÑŸÖÿØŸäÿ±\",\n  \"ÿ£ÿ≠ÿ™ÿßÿ¨ ŸÖÿ≥ÿßÿπÿØÿ© ÿ•ÿ∂ÿßŸÅŸäÿ©\"\n];\n\n// Function to check if agent intervention is needed\nfunction needsAgent(selectedOption) {\n  return agentTriggers.includes(selectedOption);\n}\n\n// Function to get node data\nfunction getNodeData(nodeKey) {\n  if (nodeKey === \"\") {\n    return questionTree[\"\"] || null;\n  }\n  \n  let node = questionTree[nodeKey];\n  \n  while (node && node.redirect) {\n    const redirectKey = node.redirect;\n    node = questionTree[redirectKey];\n  }\n  \n  if (node && node.message) {\n    node.message = node.message.replace(/{random}/g, Math.floor(Math.random() * 10000));\n  }\n  \n  return node;\n}\n\n// Process the conversation\nlet response;\n\n// Check if user selected an option that requires agent\nif (needsAgent(userMsg)) {\n  session.escalationAttempts++;\n  session.isEscalated = true;\n  session.escalationReason = userMsg;\n  session.customerPath = session.previousStates.concat([session.state]);\n  \n  response = {\n    sessionId: sessionId,\n    message: \"Ÿäÿ™ŸÖ ÿ™ÿ≠ŸàŸäŸÑŸÉ ÿßŸÑÿ¢ŸÜ ÿ•ŸÑŸâ ÿ£ÿ≠ÿØ ŸÖŸÖÿ´ŸÑŸä ÿÆÿØŸÖÿ© ÿßŸÑÿπŸÖŸÑÿßÿ°. Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ±...\\n‚è∞ ŸàŸÇÿ™ ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑŸÖÿ™ŸàŸÇÿπ: 2-3 ÿØŸÇÿßÿ¶ŸÇ\",\n    options: [\"ÿ•ŸÑÿ∫ÿßÿ° ŸàÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\"],\n    callAgent: true,\n    escalationReason: userMsg,\n    customerPath: session.previousStates.concat([session.state]),\n    escalationAttempt: session.escalationAttempts\n  };\n}\n// Check if user wants to cancel agent call\nelse if (userMsg === \"ÿ•ŸÑÿ∫ÿßÿ° ŸàÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\") {\n  session.state = \"\";\n  session.previousStates = [];\n  session.isEscalated = false;\n  session.escalationReason = null;\n  const startNode = getNodeData(\"\");\n  response = {\n    sessionId: sessionId,\n    message: startNode ? startNode.message : \"ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉ! ŸÉŸäŸÅ ŸäŸÖŸÉŸÜŸÜŸä ŸÖÿ≥ÿßÿπÿØÿ™ŸÉ ÿßŸÑŸäŸàŸÖÿü\",\n    options: startNode ? startNode.options : [],\n    cancelAgent: true\n  };\n}\n// Rest of your existing logic...\nelse if (userMsg === \"ÿ•ŸÜŸáÿßÿ° ÿßŸÑŸÖÿ≠ÿßÿØÿ´ÿ©\") {\n  const endNode = getNodeData(\"ÿ•ŸÜŸáÿßÿ° ÿßŸÑŸÖÿ≠ÿßÿØÿ´ÿ©\");\n  response = {\n    sessionId: sessionId,\n    message: endNode ? endNode.message : \"ÿ¥ŸÉÿ±ÿßŸã ŸÑÿ™ŸàÿßÿµŸÑŸÉ ŸÖÿπŸÜÿß. ŸÜÿ™ŸÖŸÜŸâ ŸÑŸÉ ŸäŸàŸÖÿßŸã ÿ≥ÿπŸäÿØÿßŸã! üëã\",\n    options: endNode ? endNode.options : [\"ÿ®ÿØÿ° ŸÖÿ≠ÿßÿØÿ´ÿ© ÿ¨ÿØŸäÿØÿ©\"],\n    endSession: true\n  };\n  delete sessions[sessionId];\n}\nelse if (userMsg === \"ÿ®ÿØÿ° ŸÖÿ≠ÿßÿØÿ´ÿ© ÿ¨ÿØŸäÿØÿ©\") {\n  delete sessions[sessionId];\n  const newSessionId = \"session-\" + Date.now();\n  sessions[newSessionId] = {\n    state: \"\",\n    previousStates: [],\n    lastAccess: Date.now(),\n    escalationAttempts: 0,\n    isEscalated: false,\n    conversationHistory: []\n  };\n  \n  const startNode = getNodeData(\"\");\n  response = {\n    sessionId: newSessionId,\n    message: startNode ? startNode.message : \"ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉ! ŸÉŸäŸÅ ŸäŸÖŸÉŸÜŸÜŸä ŸÖÿ≥ÿßÿπÿØÿ™ŸÉ ÿßŸÑŸäŸàŸÖÿü\",\n    options: startNode ? startNode.options : [],\n    newSession: true\n  };\n}\nelse if (userMsg === \"\") {\n  if (session.state === \"\") {\n    const startNode = getNodeData(\"\");\n    response = {\n      sessionId: sessionId,\n      message: startNode ? startNode.message : \"ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉ! ŸÉŸäŸÅ ŸäŸÖŸÉŸÜŸÜŸä ŸÖÿ≥ÿßÿπÿØÿ™ŸÉ ÿßŸÑŸäŸàŸÖÿü\",\n      options: startNode ? startNode.options : []\n    };\n  } else {\n    const currentNode = getNodeData(session.state);\n    response = {\n      sessionId: sessionId,\n      message: currentNode ? currentNode.message : \"ÿπÿ∞ÿ±ÿßŸãÿå ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£.\",\n      options: currentNode ? currentNode.options : [\"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\"]\n    };\n  }\n} else {\n  const currentNode = session.state === \"\" ? getNodeData(\"\") : getNodeData(session.state);\n  \n  if (userMsg === \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿÆŸÑŸÅ\" && session.previousStates.length > 0) {\n    session.state = session.previousStates.pop();\n    const backNode = session.state === \"\" ? getNodeData(\"\") : getNodeData(session.state);\n    response = {\n      sessionId: sessionId,\n      message: backNode ? backNode.message : \"ÿπÿ∞ÿ±ÿßŸãÿå ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£.\",\n      options: backNode ? backNode.options : [\"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\"]\n    };\n  }\n  else if (userMsg === \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\" || userMsg === \"ŸÜÿπŸÖ\") {\n    session.state = \"\";\n    session.previousStates = [];\n    const startNode = getNodeData(\"\");\n    response = {\n      sessionId: sessionId,\n      message: startNode ? startNode.message : \"ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉ! ŸÉŸäŸÅ ŸäŸÖŸÉŸÜŸÜŸä ŸÖÿ≥ÿßÿπÿØÿ™ŸÉ ÿßŸÑŸäŸàŸÖÿü\",\n      options: startNode ? startNode.options : []\n    };\n  }\n  else if (currentNode && currentNode.options && currentNode.options.includes(userMsg)) {\n    const nextNode = getNodeData(userMsg);\n    \n    if (nextNode) {\n      if (session.state !== \"\") {\n        session.previousStates.push(session.state);\n      }\n      \n      session.state = userMsg;\n      \n      response = {\n        sessionId: sessionId,\n        message: nextNode.message,\n        options: nextNode.options || []\n      };\n    } else {\n      response = {\n        sessionId: sessionId,\n        message: \"ÿπÿ∞ÿ±ÿßŸãÿå Ÿáÿ∞ÿß ÿßŸÑÿÆŸäÿßÿ± ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ± ÿ≠ÿßŸÑŸäÿßŸã.\",\n        options: currentNode.options || [\"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\"]\n      };\n    }\n  }\n  else {\n    response = {\n      sessionId: sessionId,\n      message: \"ÿπÿ∞ÿ±ÿßŸãÿå ŸÑŸÖ ÿ£ŸÅŸáŸÖ ÿßÿÆÿ™Ÿäÿßÿ±ŸÉ. Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ÿ£ÿ≠ÿØ ÿßŸÑÿÆŸäÿßÿ±ÿßÿ™ ÿßŸÑŸÖÿ™ÿßÿ≠ÿ©:\",\n      options: currentNode && currentNode.options ? currentNode.options : [\"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\"]\n    };\n  }\n}\n\n// Store conversation history\nif (!session.conversationHistory) {\n  session.conversationHistory = [];\n}\n\n// Store the current exchange in conversation history\n// Replace empty message with __INIT_CHAT__ for consistency\nconst messageForHistory = userMsg === \"\" ? \"__INIT_CHAT__\" : userMsg;\nsession.conversationHistory.push({\n  user: messageForHistory,\n  bot: response.message,\n  timestamp: new Date().toISOString()\n});\n\n// If this is an AI agent response, update the history with the AI's response\nif (response.isAgentResponse) {\n  session.conversationHistory[session.conversationHistory.length - 1].bot = response.message;\n}\n\nreturn [{\n  json: response\n}];"
      },
      "id": "d9cc40ce-7ead-4f8b-822a-8978bd8deedb",
      "name": "Code1",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        380,
        -120
      ]
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "d14cd687-18b9-4fd9-9198-5e24ec21e929",
      "name": "Respond to Webhook1",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        1380,
        -120
      ]
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.message }}",
        "options": {
          "systemMessage": "=# Customer Service Representative System Prompt ‚Äì Formal Saudi Arabic Edition\n\nYou are a professional customer-service representative for **Test.com**.  \nYour name is **Khalid (ÿÆÿßŸÑÿØ)**.  \nYou must answer customers in **formal Arabic (ÿßŸÑŸÅÿµÿ≠Ÿâ)** while preserving a confident, distinctly Saudi professional tone.\n\n---\n\n## Core Guidelines\n- **Stay strictly within customer-service scope** ‚Äì do not discuss topics beyond Test.com support.  \n- **Maintain professional boundaries** ‚Äì do not let customers steer you off topic.  \n- **Always reply in formal Arabic**. Avoid colloquial expressions; use clear Modern Standard Arabic infused with polite Saudi business etiquette.\n\n---\n\n## Special Token\n- **__INIT_CHAT__** appears when the chat opens or the customer sends an empty message.  \n  - Treat it as if the customer has just joined.  \n  - Send an initial greeting and ask how you may assist.  \n  - **Never mention the token itself.**\n\n---\n\n## Escalation Context (if provided)\n- Escalation Reason: `{{ $item(\"0\").$node[\"If Escalated\"].json[\"escalationReason\"] }}`  \n- Customer Journey Path: `{{ $item(\"0\").$node[\"If Escalated\"].json[\"customerPath\"].join(' > ') }}`  \n- Previous Conversation: `{{ $item(\"0\").$node[\"If Escalated\"].json[\"previousMessages\"] }}`  \n\n---\n\n## Response Protocol\n\n### 1. Initial Greeting\n- Welcome the customer warmly yet formally.  \n- Acknowledge the escalation if applicable.  \n- Express sincere concern.  \n- If **__INIT_CHAT__** is detected, send the greeting shown in the example below.\n\n### 2. Empathy & Apology\n- Apologize for any inconvenience.  \n- Recognize the customer‚Äôs feelings.  \n- Assure them of your commitment to resolve the matter.\n\n### 3. Problem Resolution\n- Clarify the specific issue swiftly.  \n- Ask precise, respectful questions when necessary.  \n- Provide concrete solutions using realistic Test.com data.\n\n### 4. Use Realistic Data\nWhen referencing details, employ believable placeholders such as:  \n- Order numbers (e.g., **#TST-2025-XXXXX**)  \n- Delivery dates within reasonable ranges  \n- Product codes and specifications  \n- Refund / exchange policies  \n- Shipping tracking numbers\n\n### 5. Communication Style\n- Use clear, well-structured formal Arabic.  \n- Maintain respectful Saudi business courtesy (e.g., ¬´Ÿäÿ≥ÿ±ŸëŸÜÿß ÿÆÿØŸÖÿ™ŸÉ¬ªÿå ¬´ÿ™ŸÅÿ∂ŸëŸÑ¬ª).  \n- Avoid slang or informal dialect.  \n- Keep a solution-oriented tone throughout.\n\n### 6. Conversation Flow\n- Keep replies focused and relevant.  \n- Build naturally on previous messages.  \n- Remember and reference earlier details accurately.  \n- Handle **__INIT_CHAT__** seamlessly without revealing it.\n\n### 7. Closing Protocol\nIf the customer wishes to end the chat:  \n- Thank them for contacting Test.com.  \n- Summarize actions taken or next steps.  \n- Provide a reference number if applicable.  \n- Close with a formal Saudi farewell (e.g., ¬´ŸÜÿ¥ŸÉÿ± ŸÑŸÉŸÖ ÿ™ŸàÿßÿµŸÑŸÉŸÖÿå ŸÜÿ™ÿ∑ŸÑÿπ ŸÑÿÆÿØŸÖÿ™ŸÉŸÖ ŸÖÿ≥ÿ™ŸÇÿ®ŸÑÿßŸã¬ª).\n\n---\n\n## Boundary Management\n\n### Redirect Off-Topic Requests\nIf the customer asks about topics unrelated to Test.com, reply:\n\n> ¬´ŸÜÿπÿ™ÿ∞ÿ±ÿå ŸäŸÇÿ™ÿµÿ± ÿØŸàÿ±Ÿä ÿπŸÑŸâ ÿØÿπŸÖ ÿÆÿØŸÖÿßÿ™ Test.com. ŸáŸÑ ŸÑÿØŸäŸÉŸÖ ÿßÿ≥ÿ™ŸÅÿ≥ÿßÿ± Ÿäÿ™ÿπŸÑŸÇ ÿ®ÿ∑ŸÑÿ®ÿßÿ™ŸÉŸÖ ÿ£Ÿà ÿ®ÿÆÿØŸÖÿßÿ™ŸÜÿßÿü¬ª\n\n### Never Provide Information About\n- Programming or technical questions  \n- Personal opinions or advice  \n- External companies  \n- Any non-Test.com topics\n\n---\n\n## Example Reply for **__INIT_CHAT__**\n\n> ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉŸÖ ŸÅŸä ÿÆÿØŸÖÿ© ÿπŸÖŸÑÿßÿ° Test.comÿå ŸÖÿπŸÉŸÖ ÿÆÿßŸÑÿØ.  \n>  \n> ÿ£ŸÅŸáŸÖ ÿ£ŸÜŸá ÿ™ŸÖ ÿ™ÿ≠ŸàŸäŸÑ ÿ∑ŸÑÿ®ŸÉŸÖ ÿ•ŸÑŸäŸë ÿ®ÿ≥ÿ®ÿ® ** escalation reason **ÿå ŸàŸÜÿπÿ™ÿ∞ÿ± ÿπŸÜ ÿ£Ÿä ÿ•ÿ≤ÿπÿßÿ¨ ÿ≠ÿØÿ´.  \n>  \n> Ÿäÿ≥ÿπÿØŸÜŸä ŸÖÿ≥ÿßÿπÿØÿ™ŸÉŸÖ ŸÅŸä ÿ≠ŸÑ Ÿáÿ∞Ÿá ÿßŸÑŸÖÿ¥ŸÉŸÑÿ© ÿπŸÑŸâ Ÿàÿ¨Ÿá ÿßŸÑÿ≥ÿ±ÿπÿ©. ŸáŸÑ ÿ™ÿ™ŸÉÿ±ŸëŸÖŸàŸÜ ÿ®ÿ™Ÿàÿ∂Ÿäÿ≠ **[ÿ≥ÿ§ÿßŸÑ ÿ•Ÿäÿ∂ÿßÿ≠ ŸÖÿ≠ÿØŸëÿØ]**ÿü  \n>  \n> ŸáŸÑ ŸáŸÜÿßŸÉ ÿ£ŸÖÿ± ÿ¢ÿÆÿ± ŸäŸÖŸÉŸÜŸÜŸä ÿÆÿØŸÖÿ™ŸÉŸèŸÖ ÿ®ÿ¥ÿ£ŸÜŸá ÿßŸÑŸäŸàŸÖÿü\n\n---\n\n**Remember**\n- You represent **Test.com** exclusively.  \n- Your aim is customer satisfaction within company policies.  \n- Every interaction should move toward resolving the issue.  \n- Remain professional and composed, even with difficult customers.  \n- Never mention **__INIT_CHAT__**.\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2,
      "position": [
        760,
        60
      ],
      "id": "bf93ce1d-3994-457e-8bde-cc09b4e5abb8",
      "name": "AI Agent1",
      "alwaysOutputData": false,
      "executeOnce": false,
      "retryOnFail": false
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {
          "maxTokens": 600,
          "temperature": 0.7
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        700,
        260
      ],
      "id": "f8f764df-6284-4400-9083-73cd13815234",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "jtIFk60ePtIi0X7E",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        860,
        260
      ],
      "id": "da08a9ea-23ad-4e0f-8b21-e90ad3306ace",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "f0e3c458-059a-47ae-bf4b-5340e906c761",
              "name": "sessionId",
              "value": "={{ $json.sessionId }}",
              "type": "string"
            },
            {
              "id": "fde0c67d-f705-4d1e-9c03-532dab400bd7",
              "name": "message",
              "value": "={{ $json.output }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1100,
        60
      ],
      "id": "d5100e5d-445b-46d1-94c1-a10631383ca9",
      "name": "Edit Fields"
    }
  ],
  "pinData": {},
  "connections": {
    "Webhook": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          },
          {
            "node": "Question Tree",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Question Tree": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "Code1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Escalated": {
      "main": [
        [
          {
            "node": "AI Agent1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Respond to Webhook1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code1": {
      "main": [
        [
          {
            "node": "If Escalated",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent1": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent1",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "Respond to Webhook1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "4d13e50c-cb52-4f49-8daa-07b236eaf16f",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "5f02eb88f83c7644cf5ffb832830891f299e2c18d0dbf02e5ae4cf6e4478fd7e"
  },
  "id": "OrhawfHzk48kuqL4",
  "tags": []
}